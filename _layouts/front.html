<html lang="en">

<style>
  /* Custom player style */
  midi-player {
    display: block;
    width: inherit;
    height: 25px;
    margin: 0 0px 0rem 0px;
    margin-top: 0;
  }
  
  midi-player::part(control-panel) {
    background: linear-gradient(#fefefe, #e9e9e9);
    border: 1px solid #e9e9e9;
    border-top: none;
    border-radius: 0px 0px 10px 10px;
  }
  
  midi-visualizer .piano-roll-visualizer {
    background: #fefefe;
    border: 1px solid #e9e9e9;
    border-bottom: none;
    border-radius: 0px 0px 0 0;
    margin: 0 0px;
    margin-bottom: 0;
    width: inherit;
    overflow: auto;
  }
  
  midi-visualizer svg {
        margin: 2px; }
  
  midi-visualizer svg rect.note {
          opacity: calc(min(1, (var(--midi-velocity) + 30) / 128) * 0.75); }
  
  midi-visualizer svg rect.note.active {
    opacity: calc(min(1, (var(--midi-velocity) + 30) / 128) * 0.9);
    stroke: rgb(0, 0, 0);
    stroke-width: 1;
    stroke-opacity: 1; }

    midi-visualizer svg rect.note {
      fill: #17becf; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="0"] {
      fill: #1f77b4; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="8"] {
      fill: #2ca02c; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="16"] {
      fill: #bcbd22; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="24"] {
      fill: #e377c2; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="32"] {
      fill: #9467bd; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="40"] {
      fill: #8c564b; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="48"] {
      fill: #ffbb78; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="56"] {
      fill: #ff7f0e; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="64"] {
      fill: #d62728; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="72"] {
      fill: #d62728; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="80"] {
      fill: #1b9e77; opacity: 75%;}
  
    midi-visualizer svg rect.note[data-program="88"] {
      fill: #d62728; }

    midi-visualizer svg rect.note[data-program="89"] {
      fill: #98df8a; opacity: 75%;}

    midi-visualizer svg rect.note[data-program="1"] {
      fill: #d62728; opacity: 75%;}

  
  
  
    @import url(https://fonts.googleapis.com/css?family=Lato:400,700,900,300);
    /* MAKE IT CUTE ----- */
    .tabs {
      position: relative;
      display: flex;
      min-height: 250;
      border-radius: 10px 10px 0px 0px;
      overflow: hidden;
    }
  
    .tabby-tab {
      width: 100px;
    }
  
    .tabby-tab label {
      display: block;
      box-sizing: border-box;
      /* tab content must clear this */
        height: 25px;
      
      padding: 3px;
      text-align: center;
      background: rgb(225, 225, 250);
      cursor: pointer;
      border-radius: 10px 10px 0px 0px;
    }
  
    .tabby-tab label:hover {
      background: rgb(182, 182, 250);
    }
  
    .tabby-content {
      position: absolute;
      left: 0px; bottom: 0; right: 0px;
      /* clear the tab labels */
        top: 25; 
      padding: 0px;
      border-radius: 0px 0px 0px 0px;
      background: #ffffff;
    }
  
    /* MAKE IT WORK ----- */
    .tabby-tab [type=radio] { display: none; }
    [type=radio]:checked ~ label {
      background: rgb(152, 152, 255);
      z-index: 2;
    }
  
    [type=radio]:checked ~ label ~ .tabby-content {
      z-index: 1;
      /* show/hide */
        opacity: 1;
        transform: scale(1);
    }
  
  
</style>

{% include head.html %}

<body id="page-top">
  
<section class="bg-white">
  <div class="container no-gutter no-padding">
    <div class="col-lg-12 text-center">
        <h2 class="section-heading">Unifying Symbolic Music Arrangement: Track-Aware Reconstruction and Structured Tokenization</h2> 
        <hr class="primary">
        <h4 class="section-heading">NeurIPS 2025 Submission 19229</h4> 
        <h3></h3>
    </div>
    
    <div class="col-sm-12 small-padding">
        <p class='text-justify'>
          <b>Abstract</b>: We present a unified framework for automatic multitrack music arrangement that enables a single pre-trained symbolic music model to handle diverse arrangement scenarios, including reinterpretation, simplification, and additive generation. At its core is a segment-level reconstruction objective operating on token-level disentangled content and style, allowing for flexible any-to-any instrumentation transformations at inference time. To support track-wise modeling, we introduce REMI-z, a structured tokenization scheme for multitrack symbolic music. By preserving track-wise continuity while reducing sequence length and complexity, it enhances modeling efficiency and effectiveness for both arrangement tasks and unconditional generation. Our method outperforms task-specific state-of-the-art models on representative tasks in different arrangement scenarios&mdash;band arrangement, piano reduction, and drum arrangement, in both objective metrics and perceptual evaluations. Taken together, our framework demonstrates strong generality and suggests broader applicability in symbolic music-to-music transformation.
        </p>
    </div>
  </div>


  <div class="container no-gutter no-padding">  
    <div class="col-lg-12 text-center"><p class="h1"><hr class="primary"></p></div>
    <p class="h3">Band Arrangement</p>
    <p class='text-justify'> This task involves arranging an existing piece of music for arbitrary combinations of instruments. The model must understand the properties and typical playing styles of each instrument to allocate or generate new notes appropriately. We adopt <b>Transformer-VAE</b> from (<a href="https://openreview.net/forum?id=M75dBr10dZ" target="_blank" style="color: blue;">Zhao, 2024</a>) as the major baseline, the strongest previously reported model for multitrack arrangement without assumptions on track type or number. It combines Transformer-based long-term and inter-track modeling with a VQ-VAE generation module. Additionally, the <b>Rule-Based</b> method distributes notes evenly by pitch across instruments. Results from an ablation variant of our model are also included where the generative pre-training phrase is removed (<b>w/o PT</b>).
    </p>
    <table class="table table-bordered">
      <thead>
        <tr>
            <th style="width: 12%;">Demo No.</th>
            <th class="text-center" style="width: 17%;">Source Music</th>
            <th class="text-center" style="width: 17%;">Ours</th>
            <th class="text-center" style="width: 17%;">Transformer-VAE</th>
            <th class="text-center" style="width: 17%;">w/o PT</th>
            <th class="text-center" style="width: 17%;">Rule-Based</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="vertical-align: middle;"><b>#1</b> <em>(Jazz Band)</em></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/fly_me__song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/fly_me_ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/fly_me_qnaxl.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/fly_me_no_pt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/fly_me_rule.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#2</b> <em>(Jazz Band)</em></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/rainbow__song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/rainbow_ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/rainbow_qnaxl.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/rainbow_no_pt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/jazz band/rainbow_rule.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#3</b> <em>(Rock Band)</em></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/butterfly__song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/butterfly_ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/butterfly_qnaxl.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/butterfly_no_pt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/butterfly_rule.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#4</b> <em>(Rock Band)</em></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/buweishei__song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/buweishei_ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/buweishei_qnaxl.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/buweishei_no_pt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/rock band/buweishei_rule.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#5</b> <em>(String Trio)</em></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/first_love__song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/first_love_ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/first_love_qnaxl.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/first_love_no_pt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/first_love_rule.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#6</b> <em>(String Trio)</em></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/rainbow__song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/rainbow_ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/rainbow_qnaxl.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/rainbow_no_pt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Band Arrangement/string trio/rainbow_rule.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  
  
  <div class="container no-gutter small-padding"> </div>

  <div class="container no-gutter no-padding">  
    <div class="col-lg-12 text-center"><p class="h1"><hr class="primary"></p></div>
    <p class="h3">Piano Reduction</p>
    <p class='text-justify'> This task focuses on simplifying multi-instrumental musical pieces into solo piano accompaniments that ensure pianistic playability while preserving the original musical essence, i.e., harmonies and textures. The major baseline is <b>UNet</b> from (<a href="https://ieeexplore.ieee.org/abstract/document/10095462" target="_blank" style="color: blue;">Terao, 2023</a>), the most recent work in this area. Additionally, <b>Rule-F</b> is the flattened multitrack where the piano plays all notes, and <b>Rule-O</b> is the original piano track.
    </p>
    <p class='text-justify'>The original melody is played with a different instrument and mixed with the generated piano accompaniments.</p>
    <table class="table table-bordered">
      <thead>
        <tr>
            <th style="width: 4%;">No.</th>
            <th class="text-center" style="width: 16%;">Source Music</th>
            <th class="text-center" style="width: 16%;">Ours</th>
            <th class="text-center" style="width: 16%;">UNet</th>
            <th class="text-center" style="width: 16%;">w/o PT</th>
            <th class="text-center" style="width: 16%;">Rule-F</th>
            <th class="text-center" style="width: 16%;">Rule-O</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="vertical-align: middle;"><b>#1</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1876--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1876-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1876-unet.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1876-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1876-rule-f.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1876-rule-o.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#2</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1877--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1877-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1877-unet.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1877-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1877-rule-f.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1877-rule-o.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#3</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1880--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1880-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1880-unet.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1880-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1880-rule-f.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1880-rule-o.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#4</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1884--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1884-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1884-unet.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1884-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1884-rule-f.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1884-rule-o.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#5</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1889--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1889-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1889-unet.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1889-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1889-rule-f.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Piano Reduction/1889-rule-o.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
      </tbody>
    </table>
  </div>


  <div class="container no-gutter small-padding"> </div>

  <div class="container no-gutter no-padding">  
    <div class="col-lg-12 text-center"><p class="h1"><hr class="primary"></p></div>
    <p class="h3">Drum Arrangement</p>
    <p class='text-justify'> This task involves creating a drum track for songs that lack one. The model needs to recognize the groove of the music and enhance it using the drum set, and further, handle transitions between musical phrases to drive the music forward and make it more engaging, which consequently requires a better understanding of musical structure. The <b>Composer's Assistant 2</b> (<b>CA v2</b>) from (<a href="https://ismir2024program.ismir.net/poster_60.html" target="_blank" style="color: blue;">Malandro, 2024</a>) was used as the major baseline, which is a strong track infilling model capable of handling multitrack inputs and generating drum outputs.
    </p>
    <table class="table table-bordered">
      <thead>
        <tr>
            <th style="width: 5%;">No.</th>
            <th class="text-center" style="width: 19%;">Source Music</th>
            <th class="text-center" style="width: 19%;">Ours</th>
            <th class="text-center" style="width: 19%;">Ground Truth</th>
            <th class="text-center" style="width: 19%;">CA v2</th>
            <th class="text-center" style="width: 19%;">w/o PT</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="vertical-align: middle;"><b>#1</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1876--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1876-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1876-gt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1876-cav2.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1876-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#2</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1877--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1877-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1877-gt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1877-cav2.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1877-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#3</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1881--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1881-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1881-gt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1881-cav2.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1881-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#4</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1882--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1882-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1882-gt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1882-cav2.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1882-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
        <tr>
          <td style="vertical-align: middle;"><b>#5</b></td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1887--song.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1887-ours.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1887-gt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1887-cav2.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
          <td>
            <audio controls style="width: 100%;">
              <source src="demo/Drum Arrangement/1887-nopt.mp3" type="audio/mpeg">
              Your browser does not support the audio element.
            </audio>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="container no-gutter small-padding">
    <div class="col-lg-12 text-center"><p class="h1"><hr class="primary"></p></div>
    <p class="h3">Long-Term Arrangement</p>
    <p class='text-justify'> Our model also supports long-term arrangement. Below, we present full-song arrangement results for three tasks: band arrangement, piano reduction, and drum arrangement.
    </p>

    <p class='text-justify'></p>
    <p class="h4"><b>Band Arrangement</b></p>
    <ul>
      <li>Target Arrangement: <em style="color: #d62728;">Soprano Sax</em>, <em style="color: #1f77b4;">Acoustic Piano</em>, <em style="color: #e377c2;">Acoustic Guitar</em>, <em style="color: #9467bd;">Electric Bass</em>, <em style="color: #8c564b;">Violin</em>, <em style="color: #17becf;">Strings</em>, and <em style="color: #ff7f0e;">Brass Section</em>.</li>
      <li>Source Arrangement: <em style="color: #d62728;">Piccolo</em>, <em style="color: #1f77b4;">Acoustic Piano</em>, <em style="color: #2ca02c;">Electric Piano</em>, <em style="color: #17becf;">Strings</em>, and <em style="color: #ff7f0e;">Drumset</em>.</li>
    </ul>
    <div class="tabs">
      <div class="tabby-tab">
        <input type="radio" id="tab-1-1" name="tab-1" checked>
        <label for="tab-1-1">Result</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/band_caihong_output.midi"
            id="demo_p1_output-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/band_caihong_output.midi"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p1_output-visualizer"
            id="demo_p1_output-player">
          </midi-player>
          <audio id="demo_p1_output-audio">
            <source type="audio/mpeg" src="demo/Showcase/band_caihong_output.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
      <div class="tabby-tab">
        <input type="radio" id="tab-1-2" name="tab-1">
        <label for="tab-1-2">Source</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/band_caihong_input.midi"
            id="demo_p1_input-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/band_caihong_input.midi"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p1_input-visualizer"
            id="demo_p1_input-player">
          </midi-player>
          <audio id="demo_p1_input-audio">
            <source type="audio/mpeg" src="demo/Showcase/band_caihong_input.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
    </div>


    <p class='text-justify'></p>
    <p class="h4"><b>Piano Reduction</b></p>
    <ul>
      <li>Target Arrangement: <em style="color: #1f77b4;">Acoustic Piano</em>.
        <ul><li>The original melody is played with a different instrument and mixed with the generated piano accompaniment.</li></ul>
      </li>
      <li>Source Arrangement: <em style="color: #d62728;">Dizi</em>, <em style="color: #17becf;">Erhu</em>, <em style="color: #bcbd22;">Guzheng</em>, <em style="color: #1f77b4;">Strings</em>, <em style="color: #9467bd;">Contrabass</em>, <em style="color: #2ca02c;">Glockenspiel</em>, <em style="color: #e377c2;">Piano</em>, and <em style="color: #98df8a;">Sound Effects</em>.</li>
    </ul>
    
    <div class="tabs">
      <div class="tabby-tab">
        <input type="radio" id="tab-2-1" name="tab-2" checked>
        <label for="tab-2-1">Result</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/piano_mengdeguangdian_output.midi"
            id="demo_p2_output-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/piano_mengdeguangdian_output.midi"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p2_output-visualizer"
            id="demo_p2_output-player">
          </midi-player>
          <audio id="demo_p2_output-audio">
            <source type="audio/mpeg" src="demo/Showcase/piano_mengdeguangdian_output.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
      <div class="tabby-tab">
        <input type="radio" id="tab-2-2" name="tab-2">
        <label for="tab-2-2">Source</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/piano_mengdeguangdian_input.mid"
            id="demo_p2_input-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/piano_mengdeguangdian_input.mid"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p2_input-visualizer"
            id="demo_p2_input-player">
          </midi-player>
          <audio id="demo_p2_input-audio">
            <source type="audio/mpeg" src="demo/Showcase/piano_mengdeguangdian_input.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
    </div>


    <p class='text-justify'></p>
    <p class="h4"><b>Drum Arrangement</b></p>
    <ul>
      <li>Target Arrangement: <em style="color: #d62728;">Drumset</em>.</li>
      <li>Source Arrangement: <em style="color: #1f77b4;">Acoustic Piano</em>.</li>
    </ul>
    <div class="tabs">
      <div class="tabby-tab">
        <input type="radio" id="tab-3-1" name="tab-3" checked>
        <label for="tab-3-1">Result</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/drum_butterfly_output_mixed.midi"
            id="demo_p3_output-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/drum_butterfly_output_mixed.midi"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p3_output-visualizer"
            id="demo_p3_output-player">
          </midi-player>
          <audio id="demo_p3_output-audio">
            <source type="audio/mpeg" src="demo/Showcase/drum_butterfly_output.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
      <div class="tabby-tab">
        <input type="radio" id="tab-3-2" name="tab-3">
        <label for="tab-3-2">Drum Track</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/drum_butterfly_output_drum_only.midi"
            id="demo_p3_track-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/drum_butterfly_output_drum_only.midi"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p3_track-visualizer"
            id="demo_p3_track-player">
          </midi-player>
          <audio id="demo_p3_track-audio">
            <source type="audio/mpeg" src="demo/Showcase/drum_butterfly_output.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
      <div class="tabby-tab">
        <input type="radio" id="tab-3-3" name="tab-3">
        <label for="tab-3-3">Source</label>
        <div class="tabby-content">
          <midi-visualizer 
            src="demo/Showcase/drum_butterfly_input.midi"
            id="demo_p3_input-visualizer">
          </midi-visualizer>
          <midi-player
            src="demo/Showcase/drum_butterfly_input.midi"
            sound-font="demo/soundfonts/silence" 
            visualizer="#demo_p3_input-visualizer"
            id="demo_p3_input-player">
          </midi-player>
          <audio id="demo_p3_input-audio">
            <source type="audio/mpeg" src="demo/Showcase/drum_butterfly_input.mp3">
            Your browser does not support the audio tag.
          </audio>
        </div>
      </div>
    </div>


  </div>


  <div class="container no-gutter small-padding"> </div>

  <div class="container no-gutter no-padding">
    <p class="h1"><hr class="primary"></p>
    <h5>This site uses <a href="https://volny.github.io/creative-theme-jekyll/" target="_blank" style="color: blue;">the jekyll template</a>.</h5>
  </div>

</section>

{% include scripts.html %}

<script src="https://cdn.jsdelivr.net/combine/npm/tone@14.7.58,npm/@magenta/music@1.23.1/es6/core.js,npm/focus-visible@5,npm/html-midi-player@1.4.0"></script>

<script>

  var i_vis;
  var visualizers = document.getElementsByTagName("midi-visualizer")
  for (i_vis = 0; i_vis < visualizers.length; i_vis++) {
    visualizers[i_vis].config = {
    noteHeight: 2.5,
    pixelsPerTimeStep: 20,
    minPitch: 32,
    maxPitch: 96,
    };
  }
  
  async function onDomReady() {
      const players = document.getElementsByTagName('midi-player');
      const audios = document.getElementsByTagName('audio');
  
      for (let i = 0; i < players.length; i++) {
        const player = players[i];
        const audio = audios[i+85]
  
        player.addEventListener('load', function () {
          const SeekBar = player.shadowRoot.querySelector('.seek-bar');
          SeekBar.addEventListener('input', function () {
            audio.pause();
          });
          SeekBar.addEventListener('change', function () {
            audio.currentTime = player.currentTime;
            if (player.playing)
            audio.play();
          });
        })
        
        player.addEventListener('start', function () {
          audio.currentTime = player.currentTime;
          audio.play();
        });
        player.addEventListener('stop', function () {
          audio.pause();
        });
      }
  }
  document.addEventListener("DOMContentLoaded", onDomReady, false);

</script>

</body>
</html>
